webpackJsonp([6],{"+Bhe":function(t,e){},"5bEv":function(t,e){},vNP4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("bQ0r"),i=n.n(o),a=n("wzVF"),r=n("Hyoj"),c=(n("odGe"),n("BM2P")),s={name:"web-config-about",components:{mavonEditor:r.mavonEditor},data:function(){return{value:""}},created:function(){var t=this;this.getAboutMe().then(function(e){t.value=e.md}).catch(function(){})},methods:i()({},Object(a.b)(["getQiniuToken","uploadToQiniu","getAboutMe","modifyAboutMe"]),{$imgAdd:function(t,e){var n=this;this.getQiniuToken(!0).then(function(o){var i=new FormData;i.append("token",o.token),i.append("file",e),n.startUploadImg(i,t)}).catch(function(t){n.$toast(t.msg,"error")})},startUploadImg:function(t,e){var n=this;this.uploadToQiniu(t).then(function(t){n.$refs.md.$img2Url(e,t.imgUrl)}).catch(function(t){n.$toast("上传失败","error")})},uploadSuccess:function(t){this.params.imageUrl=t},markdownHtml:function(t){return Object(c.a)(t)},commit:function(){var t=this,e=this.$loading({lock:!0,text:"",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),n=this.markdownHtml(this.value);this.modifyAboutMe({aboutMeContent:this.value,htmlContent:n}).then(function(n){e.close(),t.$toast("已更新")}).catch(function(n){e.close(),t.$toast(n.msg,"error")})}})},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"web-config-about"}},[n("div",{staticClass:"header-wrap"},[t._v("\n    编辑“关于我”页面\n    "),n("div",{staticClass:"action-btn-wrap"},[n("span",{on:{click:t.commit}},[t._v("更新")])])]),t._v(" "),n("div",{staticClass:"edit-wrap"},[n("mavon-editor",{ref:"md",staticClass:"editor",attrs:{boxShadow:!1,defaultOpen:"preview",toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!1,readmodel:!0,htmlcode:!1,help:!0,undo:!0,redo:!0,trash:!0,save:!1,navigation:!1,alignleft:!1,aligncenter:!1,alignright:!1,subfield:!0,preview:!0}},on:{imgAdd:t.$imgAdd},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])},staticRenderFns:[]};var l=n("2Rgo")(s,u,!1,function(t){n("5bEv"),n("+Bhe")},"data-v-391802bc",null);e.default=l.exports}});