webpackJsonp([18],{"2la0":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("bQ0r"),n=i.n(a),r=i("wzVF"),o=i("Zz1P"),s=i.n(o),c={name:"article-list",components:{},mixins:[i("a9+M").a],data:function(){return{articleList:[],page:0,pageSize:15,currentPage:0,total:0,type:"category",name:"",id:""}},created:function(){var t=this;this.type=this.$route.query.type,"category"!==this.type&&"tag"!==this.type&&(this.type="category"),this.id=this.$route.query.id,"category"===this.type?this.getCategory(this.id).then(function(e){t.name=e.name}).catch(function(){}):"tag"===this.type&&this.getTag(this.id).then(function(e){t.name=e.name}).catch(function(){}),this.page=0,this.getList()},methods:n()({},Object(r.b)(["getArticleList","getCategory","getTag","deleteArticle"]),{formatTime:function(t,e,i,a){return i?s()(1e3*parseInt(i)).format("YYYY-MM-DD HH:mm"):"-"},formatStatus:function(t){return"0"==t?"已发布":"-"},edit:function(t){this.$router.push({name:"editArticle",query:{id:t.id}})},under:function(t){var e=this;this.showDialog("此操作会将该文章标记为删除，不再显示, 是否继续?",function(){e.deleteArticle(t.id).then(function(t){e.$toast("已删除"),e.page=0,e.getList()}).catch(function(t){e.$toast(t.msg,"error")})})},pageChange:function(t){this.scrollToTarget(0,!1),this.page=t-1,this.currentPage=t,this.getList()},getList:function(){var t=this;this.getArticleList({by:this.type,categoryId:this.id,tagId:this.id,page:this.page,pageSize:this.pageSize}).then(function(e){t.total=e.count,t.articleList=e.list}).catch(function(){t.articleList=[]})},previewImg:function(t){this.$photoPreview.open(0,[{src:t.target.src,w:40,h:20,target:t.target}])},preview:function(t){this.$router.push({name:"articlePreview",query:{id:t.id}})},showDialog:function(t,e){this.$confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e()}).catch(function(){})}})},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"article-list"}},[i("p",[i("span",{on:{click:function(e){t.$router.go(-1)}}},[i("i",{staticClass:"el-icon-arrow-left"}),t._v("\n      返回\n    ")]),t._v("\n    "+t._s("category"===t.type?"分类":"标签")+" '"+t._s(t.name)+"' 的文章(共计:"+t._s(t.total)+"篇)\n  ")]),t._v(" "),i("div",{staticClass:"article-table-wrap"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.articleList,border:"",stripe:"",size:"mini"}},[i("el-table-column",{attrs:{label:"标题","show-overflow-tooltip":"","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"article-title",on:{click:function(i){t.preview(e.row)}}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"封面图",width:"61"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("img",{staticStyle:{width:"100%",height:"20px",cursor:"pointer"},attrs:{src:e.row.cover},on:{click:t.previewImg}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"pageview",label:"阅读量",width:"60"}}),t._v(" "),i("el-table-column",{attrs:{label:"加密",width:"45"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s("0"===e.row.isEncrypt?"否":"是")+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"128",formatter:t.formatTime}}),t._v(" "),i("el-table-column",{attrs:{prop:"publishTime",label:"发布时间",width:"128",formatter:t.formatTime}}),t._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"128",formatter:t.formatTime}}),t._v(" "),i("el-table-column",{attrs:{prop:"status",label:"状态",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:"0"==e.row.status?"success":"danger",size:"mini"}},[t._v("\n            "+t._s(t.formatStatus(e.row.status))+"\n          ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",fixed:"right",width:"112"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary",circle:""},on:{click:function(i){t.edit(e.row)}}}),t._v(" "),"1"!=e.row.status?i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(i){t.under(e.row)}}}):t._e()]}}])})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.articleList.length>0,expression:"articleList.length > 0"}],staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,"current-page":t.currentPage,total:t.total},on:{"current-change":t.pageChange}})],1)],1)])},staticRenderFns:[]};var u=i("2Rgo")(c,l,!1,function(t){i("zdvG")},"data-v-33087d29",null);e.default=u.exports},zdvG:function(t,e){}});